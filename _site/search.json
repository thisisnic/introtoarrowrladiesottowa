[
  {
    "objectID": "slides.html#introduction-to-arrow-in-r",
    "href": "slides.html#introduction-to-arrow-in-r",
    "title": "Intro to Arrow in R",
    "section": "Introduction to Arrow in R",
    "text": "Introduction to Arrow in R"
  },
  {
    "objectID": "slides.html#welcome",
    "href": "slides.html#welcome",
    "title": "Intro to Arrow in R",
    "section": "Welcome!",
    "text": "Welcome!\nToday weâ€™re going to cover:\n\nWorking with larger-than-memory datasets with Arrow\nHow to get the best performance out in your analyses\n\nWhere to find more information"
  },
  {
    "objectID": "slides.html#workshop-format",
    "href": "slides.html#workshop-format",
    "title": "Intro to Arrow in R",
    "section": "Workshop format",
    "text": "Workshop format\n\nFollow-along coding\nGaps to ask question"
  },
  {
    "objectID": "slides.html#dataset-to-follow-along-with",
    "href": "slides.html#dataset-to-follow-along-with",
    "title": "Intro to Arrow in R",
    "section": "Dataset to follow along with",
    "text": "Dataset to follow along with\n\noptions(timeout = 1800)\ndownload.file(\n  url = \"https://r4ds.s3.us-west-2.amazonaws.com/seattle-library-checkouts.csv\",\n  destfile = \"./data/seattle-library-checkouts.csv\"\n)"
  },
  {
    "objectID": "slides.html#what-is-apache-arrow",
    "href": "slides.html#what-is-apache-arrow",
    "title": "Intro to Arrow in R",
    "section": "What is Apache Arrow?",
    "text": "What is Apache Arrow?\n\n\n\nA multi-language toolbox for accelerated data interchange and in-memory processing\n\n\n\nArrow is designed to both improve the performance of analytical algorithms and the efficiency of moving data from one system or programming language to another\n\n\n\n\nhttps://arrow.apache.org/overview/"
  },
  {
    "objectID": "slides.html#apache-arrow-specification",
    "href": "slides.html#apache-arrow-specification",
    "title": "Intro to Arrow in R",
    "section": "Apache Arrow Specification",
    "text": "Apache Arrow Specification\nIn-memory columnar format: a standardized, language-agnostic specification for representing structured, table-like data sets in-memory."
  },
  {
    "objectID": "slides.html#a-multi-language-toolbox",
    "href": "slides.html#a-multi-language-toolbox",
    "title": "Intro to Arrow in R",
    "section": "A Multi-Language Toolbox",
    "text": "A Multi-Language Toolbox"
  },
  {
    "objectID": "slides.html#accelerated-data-interchange",
    "href": "slides.html#accelerated-data-interchange",
    "title": "Intro to Arrow in R",
    "section": "Accelerated Data Interchange",
    "text": "Accelerated Data Interchange"
  },
  {
    "objectID": "slides.html#accelerated-in-memory-processing",
    "href": "slides.html#accelerated-in-memory-processing",
    "title": "Intro to Arrow in R",
    "section": "Accelerated In-Memory Processing",
    "text": "Accelerated In-Memory Processing\nArrowâ€™s Columnar Format is Fast\n\n\nThe contiguous columnar layout enables vectorization using the latest SIMD (Single Instruction, Multiple Data) operations included in modern processors."
  },
  {
    "objectID": "slides.html#arrow",
    "href": "slides.html#arrow",
    "title": "Intro to Arrow in R",
    "section": "arrow ğŸ“¦",
    "text": "arrow ğŸ“¦"
  },
  {
    "objectID": "slides.html#arrow-1",
    "href": "slides.html#arrow-1",
    "title": "Intro to Arrow in R",
    "section": "arrow ğŸ“¦",
    "text": "arrow ğŸ“¦"
  },
  {
    "objectID": "slides.html#seattle-checkouts-big-csv",
    "href": "slides.html#seattle-checkouts-big-csv",
    "title": "Intro to Arrow in R",
    "section": "SeattleCheckoutsBig CSV",
    "text": "SeattleCheckoutsBig CSV"
  },
  {
    "objectID": "slides.html#how-big-is-the-dataset",
    "href": "slides.html#how-big-is-the-dataset",
    "title": "Intro to Arrow in R",
    "section": "How big is the dataset?",
    "text": "How big is the dataset?\n\nfs::file_size(\"./data/seattle-library-checkouts.csv\")\n\n8.58G"
  },
  {
    "objectID": "slides.html#opening-in-arrow",
    "href": "slides.html#opening-in-arrow",
    "title": "Intro to Arrow in R",
    "section": "Opening in Arrow",
    "text": "Opening in Arrow\n\nseattle_csv &lt;- open_dataset(\n  sources = \"./data/seattle-library-checkouts.csv\", \n  format = \"csv\"\n)"
  },
  {
    "objectID": "slides.html#extract-schema",
    "href": "slides.html#extract-schema",
    "title": "Intro to Arrow in R",
    "section": "Extract schema",
    "text": "Extract schema\n\nschema(seattle_csv)\n\nSchema\nUsageClass: string\nCheckoutType: string\nMaterialType: string\nCheckoutYear: int64\nCheckoutMonth: int64\nCheckouts: int64\nTitle: string\nISBN: null\nCreator: string\nSubjects: string\nPublisher: string\nPublicationYear: string"
  },
  {
    "objectID": "slides.html#arrow-data-types",
    "href": "slides.html#arrow-data-types",
    "title": "Intro to Arrow in R",
    "section": "Arrow Data Types",
    "text": "Arrow Data Types\nArrow has a rich data type system, including direct analogs of many R data types\n\n&lt;dbl&gt; == &lt;double&gt;\n&lt;chr&gt; == &lt;string&gt; or &lt;utf8&gt;\n&lt;int&gt; == &lt;int32&gt;\n\n\nhttps://arrow.apache.org/docs/r/articles/data_types.html"
  },
  {
    "objectID": "slides.html#parsing-the-metadata",
    "href": "slides.html#parsing-the-metadata",
    "title": "Intro to Arrow in R",
    "section": "Parsing the Metadata",
    "text": "Parsing the Metadata\n\nArrow scans ğŸ‘€ a few thousand rows of the file(s) to impute or â€œguessâ€ the data types\n\nğŸ“š arrow vs readr blog post: https://thisisnic.github.io/2022/11/21/type-inference-in-readr-and-arrow/"
  },
  {
    "objectID": "slides.html#parsers-are-not-always-right",
    "href": "slides.html#parsers-are-not-always-right",
    "title": "Intro to Arrow in R",
    "section": "Parsers Are Not Always Right",
    "text": "Parsers Are Not Always Right\n\nschema(seattle_csv)\n\nSchema\nUsageClass: string\nCheckoutType: string\nMaterialType: string\nCheckoutYear: int64\nCheckoutMonth: int64\nCheckouts: int64\nTitle: string\nISBN: null\nCreator: string\nSubjects: string\nPublisher: string\nPublicationYear: string\n\n\n\n\nInternational Standard Book Number (ISBN) is a 13-digit number that uniquely identifies books and book-like products published internationally.\nData Dictionaries, metadata in data catalogues should provide this info."
  },
  {
    "objectID": "slides.html#lets-control-the-schema",
    "href": "slides.html#lets-control-the-schema",
    "title": "Intro to Arrow in R",
    "section": "Letâ€™s Control the Schema",
    "text": "Letâ€™s Control the Schema\n\nCreating a schema manually:\n\nschema(\n  UsageClass = utf8(),\n  CheckoutType = utf8(),\n  MaterialType = utf8(),\n  ...\n)\n\n\nThis will take a lot of typing with 12 columns ğŸ˜¢"
  },
  {
    "objectID": "slides.html#lets-control-the-schema-1",
    "href": "slides.html#lets-control-the-schema-1",
    "title": "Intro to Arrow in R",
    "section": "Letâ€™s Control the Schema",
    "text": "Letâ€™s Control the Schema\n\nseattle_csv &lt;- open_dataset(\n  sources = \"./data/seattle-library-checkouts.csv\", \n  col_types = schema(ISBN = string()),\n  format = \"csv\"\n)"
  },
  {
    "objectID": "slides.html#previewing-the-data",
    "href": "slides.html#previewing-the-data",
    "title": "Intro to Arrow in R",
    "section": "Previewing the data",
    "text": "Previewing the data\n\nseattle_csv |&gt; glimpse()\n\nFileSystemDataset with 1 csv file\n41,389,465 rows x 12 columns\n$ UsageClass      &lt;string&gt; \"Physical\", \"Physical\", \"Digital\", \"Physical\", \"Physiâ€¦\n$ CheckoutType    &lt;string&gt; \"Horizon\", \"Horizon\", \"OverDrive\", \"Horizon\", \"Horizoâ€¦\n$ MaterialType    &lt;string&gt; \"BOOK\", \"BOOK\", \"EBOOK\", \"BOOK\", \"SOUNDDISC\", \"BOOK\",â€¦\n$ CheckoutYear     &lt;int64&gt; 2016, 2016, 2016, 2016, 2016, 2016, 2016, 2016, 2016,â€¦\n$ CheckoutMonth    &lt;int64&gt; 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,â€¦\n$ Checkouts        &lt;int64&gt; 1, 1, 1, 1, 1, 1, 1, 1, 4, 1, 1, 2, 3, 2, 1, 3, 2, 3,â€¦\n$ Title           &lt;string&gt; \"Super rich : a guide to having it all / Russell Simmâ€¦\n$ ISBN            &lt;string&gt; \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"â€¦\n$ Creator         &lt;string&gt; \"Simmons, Russell\", \"Barclay, James, 1965-\", \"Tim Parâ€¦\n$ Subjects        &lt;string&gt; \"Self realization, Conduct of life, Attitude Psycholoâ€¦\n$ Publisher       &lt;string&gt; \"Gotham Books,\", \"Pyr,\", \"Random House, Inc.\", \"Dial â€¦\n$ PublicationYear &lt;string&gt; \"c2011.\", \"2010.\", \"2015\", \"2005.\", \"c2004.\", \"c2005.â€¦"
  },
  {
    "objectID": "slides.html#arrow-dplyr-backend",
    "href": "slides.html#arrow-dplyr-backend",
    "title": "Intro to Arrow in R",
    "section": "Arrow dplyr backend",
    "text": "Arrow dplyr backend"
  },
  {
    "objectID": "slides.html#querying-the-data",
    "href": "slides.html#querying-the-data",
    "title": "Intro to Arrow in R",
    "section": "Querying the data",
    "text": "Querying the data\n\nseattle_csv |&gt;\n  mutate(IsBook = endsWith(MaterialType, \"BOOK\")) |&gt;\n  select(MaterialType, IsBook)\n\nFileSystemDataset (query)\nMaterialType: string\nIsBook: bool (ends_with(MaterialType, {pattern=\"BOOK\", ignore_case=false}))\n\nSee $.data for the source Arrow object"
  },
  {
    "objectID": "slides.html#preview-the-query",
    "href": "slides.html#preview-the-query",
    "title": "Intro to Arrow in R",
    "section": "Preview the query",
    "text": "Preview the query\n\nseattle_csv |&gt;\n  head(20) |&gt;\n  mutate(IsBook = endsWith(MaterialType, \"BOOK\")) |&gt;\n  select(MaterialType, IsBook) |&gt;\n  collect()\n\n# A tibble: 20 Ã— 2\n   MaterialType IsBook\n   &lt;chr&gt;        &lt;lgl&gt; \n 1 BOOK         TRUE  \n 2 BOOK         TRUE  \n 3 EBOOK        TRUE  \n 4 BOOK         TRUE  \n 5 SOUNDDISC    FALSE \n 6 BOOK         TRUE  \n 7 BOOK         TRUE  \n 8 EBOOK        TRUE  \n 9 BOOK         TRUE  \n10 EBOOK        TRUE  \n11 BOOK         TRUE  \n12 BOOK         TRUE  \n13 BOOK         TRUE  \n14 AUDIOBOOK    TRUE  \n15 BOOK         TRUE  \n16 EBOOK        TRUE  \n17 SOUNDDISC    FALSE \n18 VIDEODISC    FALSE \n19 SOUNDDISC    FALSE \n20 AUDIOBOOK    TRUE"
  },
  {
    "objectID": "slides.html#data-manipulation",
    "href": "slides.html#data-manipulation",
    "title": "Intro to Arrow in R",
    "section": "Data manipulation",
    "text": "Data manipulation\n\nseattle_csv |&gt;\n  filter(endsWith(MaterialType, \"BOOK\")) |&gt;\n  group_by(CheckoutYear) |&gt;\n  summarise(Checkouts = sum(Checkouts)) |&gt;\n  arrange(CheckoutYear) |&gt; \n  collect()\n\n# A tibble: 18 Ã— 2\n   CheckoutYear Checkouts\n          &lt;int&gt;     &lt;int&gt;\n 1         2005   2129128\n 2         2006   3385869\n 3         2007   3679981\n 4         2008   4156859\n 5         2009   4500788\n 6         2010   4389760\n 7         2011   4484366\n 8         2012   4696376\n 9         2013   5394411\n10         2014   5606168\n11         2015   5784864\n12         2016   5915722\n13         2017   6280679\n14         2018   6831226\n15         2019   7339010\n16         2020   5549585\n17         2021   6659627\n18         2022   6301822"
  },
  {
    "objectID": "slides.html#gb-csv-file-arrow-dplyr",
    "href": "slides.html#gb-csv-file-arrow-dplyr",
    "title": "Intro to Arrow in R",
    "section": "9GB CSV file + arrow + dplyr",
    "text": "9GB CSV file + arrow + dplyr\n\nseattle_csv |&gt;\n  filter(endsWith(MaterialType, \"BOOK\")) |&gt;\n  group_by(CheckoutYear) |&gt;\n  summarise(Checkouts = sum(Checkouts)) |&gt;\n  arrange(CheckoutYear) |&gt; \n  collect()\n\n# A tibble: 18 Ã— 2\n   CheckoutYear Checkouts\n          &lt;int&gt;     &lt;int&gt;\n 1         2005   2129128\n 2         2006   3385869\n 3         2007   3679981\n 4         2008   4156859\n 5         2009   4500788\n 6         2010   4389760\n 7         2011   4484366\n 8         2012   4696376\n 9         2013   5394411\n10         2014   5606168\n11         2015   5784864\n12         2016   5915722\n13         2017   6280679\n14         2018   6831226\n15         2019   7339010\n16         2020   5549585\n17         2021   6659627\n18         2022   6301822"
  },
  {
    "objectID": "slides.html#gb-csv-file-arrow-dplyr-1",
    "href": "slides.html#gb-csv-file-arrow-dplyr-1",
    "title": "Intro to Arrow in R",
    "section": "9GB CSV file + arrow + dplyr",
    "text": "9GB CSV file + arrow + dplyr\n\nseattle_csv |&gt;\n  filter(endsWith(MaterialType, \"BOOK\")) |&gt;\n  group_by(CheckoutYear) |&gt;\n  summarise(Checkouts = sum(Checkouts)) |&gt;\n  arrange(CheckoutYear) |&gt; \n  collect() |&gt;\n  system.time()\n\n   user  system elapsed \n 46.948   3.350  42.274 \n\n\n42 million rows â€“ not bad, but could be fasterâ€¦."
  },
  {
    "objectID": "slides.html#file-format-apache-parquet",
    "href": "slides.html#file-format-apache-parquet",
    "title": "Intro to Arrow in R",
    "section": "File Format: Apache Parquet",
    "text": "File Format: Apache Parquet\n\n\nhttps://parquet.apache.org/"
  },
  {
    "objectID": "slides.html#parquet",
    "href": "slides.html#parquet",
    "title": "Intro to Arrow in R",
    "section": "Parquet",
    "text": "Parquet\n\nusually smaller than equivalent CSV file\nrich type system & stores the data type along with the data\nâ€œcolumn-orientedâ€ == better performance over CSVâ€™s row-by-row\nâ€œrow-chunkedâ€ == work on different parts of the file at the same time or skip some chunks all together\n\n\n\nefficient encodings to keep file size down, and supports file compression, less data to move from disk to memory\nCSV has no info about data types, inferred by each parser"
  },
  {
    "objectID": "slides.html#parquet-files-row-chunked",
    "href": "slides.html#parquet-files-row-chunked",
    "title": "Intro to Arrow in R",
    "section": "Parquet Files: â€œrow-chunkedâ€",
    "text": "Parquet Files: â€œrow-chunkedâ€"
  },
  {
    "objectID": "slides.html#parquet-files-row-chunked-column-oriented",
    "href": "slides.html#parquet-files-row-chunked-column-oriented",
    "title": "Intro to Arrow in R",
    "section": "Parquet Files: â€œrow-chunked & column-orientedâ€",
    "text": "Parquet Files: â€œrow-chunked & column-orientedâ€"
  },
  {
    "objectID": "slides.html#writing-to-parquet",
    "href": "slides.html#writing-to-parquet",
    "title": "Intro to Arrow in R",
    "section": "Writing to Parquet",
    "text": "Writing to Parquet\n\nseattle_parquet &lt;- \"./data/seattle-library-checkouts-parquet\"\n\nseattle_csv |&gt;\n  write_dataset(path = seattle_parquet,\n                format = \"parquet\")"
  },
  {
    "objectID": "slides.html#storage-parquet-vs-csv",
    "href": "slides.html#storage-parquet-vs-csv",
    "title": "Intro to Arrow in R",
    "section": "Storage: Parquet vs CSV",
    "text": "Storage: Parquet vs CSV\n\nfile &lt;- list.files(seattle_parquet)\nfile.size(file.path(seattle_parquet, file)) / 10**9\n\n[1] 4.423348\n\n\n\nParquet about half the size of the CSV file on-disk ğŸ’¾"
  },
  {
    "objectID": "slides.html#file-storage-partitioning",
    "href": "slides.html#file-storage-partitioning",
    "title": "Intro to Arrow in R",
    "section": "File Storage:Partitioning",
    "text": "File Storage:Partitioning\n\n\n\nDividing data into smaller pieces, making it more easily accessible and manageable\n\n\nfs::dir_tree(\"data/seattle-library-checkouts/\")\n\ndata/seattle-library-checkouts/\nâ”œâ”€â”€ CheckoutYear=2005\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2006\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2007\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2008\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2009\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2010\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2011\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2012\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2013\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2014\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2015\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2016\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2017\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2018\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2019\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2020\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2021\nâ”‚   â””â”€â”€ part-0.parquet\nâ””â”€â”€ CheckoutYear=2022\n    â””â”€â”€ part-0.parquet\n\n\n\n\n\nalso called multi-files or sometimes shards"
  },
  {
    "objectID": "slides.html#poll-partitioning",
    "href": "slides.html#poll-partitioning",
    "title": "Intro to Arrow in R",
    "section": "Poll: Partitioning?",
    "text": "Poll: Partitioning?\nHave you partitioned your data or used partitioned data before today?\n\n1ï¸âƒ£ Yes\n2ï¸âƒ£ No\n3ï¸âƒ£ Not sure, the data engineers sort that out!"
  },
  {
    "objectID": "slides.html#art-science-of-partitioning",
    "href": "slides.html#art-science-of-partitioning",
    "title": "Intro to Arrow in R",
    "section": "Art & Science of Partitioning",
    "text": "Art & Science of Partitioning\n\n\navoid files &lt; 20MB and &gt; 2GB\navoid &gt; 10,000 files (ğŸ¤¯)\npartition on variables used in filter()\n\n\n\nguidelines not rules, results vary\nexperiment\narrow suggests avoid files smaller than 20MB and larger than 2GB\navoid partitions that produce more than 10,000 files\npartition by variables that you filter by, allows arrow to only read relevant files"
  },
  {
    "objectID": "slides.html#rewriting-the-data-again",
    "href": "slides.html#rewriting-the-data-again",
    "title": "Intro to Arrow in R",
    "section": "Rewriting the Data Again",
    "text": "Rewriting the Data Again\n\nseattle_parquet_part &lt;- \"./data/seattle-library-checkouts\"\n\nseattle_csv |&gt;\n  group_by(CheckoutYear) |&gt;\n  write_dataset(path = seattle_parquet_part,\n                format = \"parquet\")"
  },
  {
    "objectID": "slides.html#what-did-we-engineer",
    "href": "slides.html#what-did-we-engineer",
    "title": "Intro to Arrow in R",
    "section": "What Did We â€œEngineerâ€?",
    "text": "What Did We â€œEngineerâ€?\n\nseattle_parquet_part &lt;- \"./data/seattle-library-checkouts\"\n\nsizes &lt;- tibble(\n  files = list.files(seattle_parquet_part, recursive = TRUE),\n  size_GB = file.size(file.path(seattle_parquet_part, files)) / 10**9\n)\n\nsizes\n\n# A tibble: 18 Ã— 2\n   files                            size_GB\n   &lt;chr&gt;                              &lt;dbl&gt;\n 1 CheckoutYear=2005/part-0.parquet   0.114\n 2 CheckoutYear=2006/part-0.parquet   0.172\n 3 CheckoutYear=2007/part-0.parquet   0.186\n 4 CheckoutYear=2008/part-0.parquet   0.204\n 5 CheckoutYear=2009/part-0.parquet   0.224\n 6 CheckoutYear=2010/part-0.parquet   0.233\n 7 CheckoutYear=2011/part-0.parquet   0.250\n 8 CheckoutYear=2012/part-0.parquet   0.261\n 9 CheckoutYear=2013/part-0.parquet   0.282\n10 CheckoutYear=2014/part-0.parquet   0.296\n11 CheckoutYear=2015/part-0.parquet   0.308\n12 CheckoutYear=2016/part-0.parquet   0.315\n13 CheckoutYear=2017/part-0.parquet   0.319\n14 CheckoutYear=2018/part-0.parquet   0.306\n15 CheckoutYear=2019/part-0.parquet   0.302\n16 CheckoutYear=2020/part-0.parquet   0.158\n17 CheckoutYear=2021/part-0.parquet   0.240\n18 CheckoutYear=2022/part-0.parquet   0.252"
  },
  {
    "objectID": "slides.html#gb-partitioned-parquet-files-arrow-dplyr",
    "href": "slides.html#gb-partitioned-parquet-files-arrow-dplyr",
    "title": "Intro to Arrow in R",
    "section": "4.5GB partitioned Parquet files + arrow + dplyr",
    "text": "4.5GB partitioned Parquet files + arrow + dplyr\n\nseattle_parquet_part &lt;- \"./data/seattle-library-checkouts\"\n\nopen_dataset(seattle_parquet_part,\n             format = \"parquet\") |&gt;\n  filter(endsWith(MaterialType, \"BOOK\")) |&gt;\n  group_by(CheckoutYear) |&gt;\n  summarise(Checkouts = sum(Checkouts)) |&gt;\n  arrange(CheckoutYear) |&gt; \n  collect() |&gt;\n  system.time()\n\n   user  system elapsed \n 12.805   1.315   1.767 \n\n\n\n42 million rows â€“ not too shabby!"
  },
  {
    "objectID": "slides.html#partition-design",
    "href": "slides.html#partition-design",
    "title": "Intro to Arrow in R",
    "section": "Partition Design",
    "text": "Partition Design\n\n\n\nPartitioning on variables commonly used in filter() often faster\nNumber of partitions also important (Arrow reads the metadata of each file)\n\n\n\nfs::dir_tree(\"data/seattle-library-checkouts/\")\n\ndata/seattle-library-checkouts/\nâ”œâ”€â”€ CheckoutYear=2005\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2006\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2007\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2008\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2009\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2010\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2011\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2012\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2013\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2014\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2015\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2016\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2017\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2018\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2019\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2020\nâ”‚   â””â”€â”€ part-0.parquet\nâ”œâ”€â”€ CheckoutYear=2021\nâ”‚   â””â”€â”€ part-0.parquet\nâ””â”€â”€ CheckoutYear=2022\n    â””â”€â”€ part-0.parquet"
  },
  {
    "objectID": "slides.html#performance-review-single-csv",
    "href": "slides.html#performance-review-single-csv",
    "title": "Intro to Arrow in R",
    "section": "Performance Review: Single CSV",
    "text": "Performance Review: Single CSV\nHow long does it take to calculate the number of books checked out in each month of 2021?\n\n\nopen_dataset(\n  sources = \"./data/seattle-library-checkouts.csv\", \n  format = \"csv\"\n) |&gt; \n  filter(CheckoutYear == 2021, endsWith(MaterialType, \"BOOK\")) |&gt;\n  group_by(CheckoutMonth) |&gt;\n  summarize(TotalCheckouts = sum(Checkouts)) |&gt;\n  arrange(desc(CheckoutMonth)) |&gt;\n  collect() |&gt;\n  system.time()\n\n   user  system elapsed \n 39.837   5.778  37.287"
  },
  {
    "objectID": "slides.html#performance-review-partitioned-parquet",
    "href": "slides.html#performance-review-partitioned-parquet",
    "title": "Intro to Arrow in R",
    "section": "Performance Review: Partitioned Parquet",
    "text": "Performance Review: Partitioned Parquet\nHow long does it take to calculate the number of books checked out in each month of 2021?\n\n\nopen_dataset(\"./data/seattle-library-checkouts\",\n             format = \"parquet\") |&gt; \n  filter(CheckoutYear == 2021, endsWith(MaterialType, \"BOOK\")) |&gt;\n  group_by(CheckoutMonth) |&gt;\n  summarize(TotalCheckouts = sum(Checkouts)) |&gt;\n  arrange(desc(CheckoutMonth)) |&gt;\n  collect() |&gt; \n  system.time()\n\n   user  system elapsed \n  0.895   0.127   0.280"
  },
  {
    "objectID": "slides.html#engineering-data-tips-for-improved-storage-performance",
    "href": "slides.html#engineering-data-tips-for-improved-storage-performance",
    "title": "Intro to Arrow in R",
    "section": "Engineering Data Tips for Improved Storage & Performance",
    "text": "Engineering Data Tips for Improved Storage & Performance\n\n\nconsider â€œcolumn-orientedâ€ file formats like Parquet\nconsider partitioning, experiment to get an appropriate partition design ğŸ—‚ï¸\nwatch your schemas ğŸ‘€"
  },
  {
    "objectID": "slides.html#summary",
    "href": "slides.html#summary",
    "title": "Intro to Arrow in R",
    "section": "Summary",
    "text": "Summary\nWhat we covered:"
  },
  {
    "objectID": "slides.html#getting-help-and-more-resources",
    "href": "slides.html#getting-help-and-more-resources",
    "title": "Intro to Arrow in R",
    "section": "Getting help and more resources",
    "text": "Getting help and more resources"
  },
  {
    "objectID": "slides.html#r-for-data-science-2e",
    "href": "slides.html#r-for-data-science-2e",
    "title": "Intro to Arrow in R",
    "section": "R for Data Science (2e)",
    "text": "R for Data Science (2e)\n\n\n\n\n\nChapter 23: Arrow\n\nhttps://r4ds.hadley.nz/"
  },
  {
    "objectID": "slides.html#scaling-up-with-r-and-arrow",
    "href": "slides.html#scaling-up-with-r-and-arrow",
    "title": "Intro to Arrow in R",
    "section": "Scaling Up with R and Arrow",
    "text": "Scaling Up with R and Arrow\n\n\n\n\nCurrently being written but preview available!\n\nhttps://arrowrbook.com"
  }
]